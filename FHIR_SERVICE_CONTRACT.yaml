openapi: 3.0.3
info:
  title: FHIR Patient Data Service API (Test Server)
  description: |
    **⚠️ TEST SERVER ONLY - NOT FOR PRODUCTION USE ⚠️**
    
    Comprehensive service contract for FHIR test server operations. This API provides access to
    synthetic test patient data including demographics, conditions, medications, observations, 
    encounters, and other clinical resources.
    
    **IMPORTANT**: This is a test server containing synthetic test data only. All patient data,
    diagnoses, medications, and clinical information returned by this API are test data and
    do not represent real patients or real medical information. This server is intended for
    development, testing, and demonstration purposes only.
    
    **Authentication**: HTTP Basic Authentication is required for all requests.
    
    **FHIR Version**: R4 (FHIR Release 4)
    
    **Base URL**: http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo
    
    **Note**: This contract is based on standard FHIR R4 patterns. To get the exact capabilities
    of this server, query the /metadata endpoint (CapabilityStatement) with authentication.
  version: 2.0.0
  contact:
    name: Health Companion Team
    email: support@healthcompanion.example.com

servers:
  - url: http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo
    description: Test FHIR Server (Test Data Only - Not for Production)

tags:
  - name: Metadata
    description: Server capability and metadata operations
  - name: Patient
    description: Patient resource operations
  - name: Condition
    description: Condition (diagnosis) resource operations
  - name: MedicationStatement
    description: Medication statement resource operations
  - name: Observation
    description: Observation (lab results, vital signs) resource operations
  - name: Encounter
    description: Encounter (visits, appointments) resource operations

paths:
  /metadata:
    get:
      tags:
        - Metadata
      summary: Get server capabilities (CapabilityStatement)
      description: |
        Returns the FHIR CapabilityStatement for this test server, which describes the
        available resources, operations, search parameters, and other capabilities.
        
        This endpoint can be used to discover what resources and operations are actually
        supported by the server. All capabilities described are for test data only.
      operationId: getCapabilityStatement
      parameters:
        - name: _format
          in: query
          required: false
          description: Response format (json or xml)
          schema:
            type: string
            enum: [json, xml]
            default: json
      security:
        - BasicAuth: []
      responses:
        '200':
          description: |
            Successful response. Returns a CapabilityStatement resource describing server capabilities.
            All capabilities are for test data only.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/CapabilityStatement'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/ServerError'

  /Patient/{patientId}:
    get:
      tags:
        - Patient
      summary: Read a specific test patient
      description: |
        Retrieves a specific test patient resource by ID. Returns test patient demographics
        and basic information. All data is synthetic test data only.
      operationId: readPatient
      parameters:
        - name: patientId
          in: path
          required: true
          description: |
            The test patient identifier (MPIID - Master Patient Index ID).
            Valid test patient MPIIDs can be found in fhir_test_patients.csv.
            All patient IDs reference test/synthetic data only.
          schema:
            type: string
            pattern: '^\d+$'
            example: "100000010"
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful response. Returns test Patient resource.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/Patient'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'

  /Patient:
    get:
      tags:
        - Patient
      summary: Search for test patients
      description: |
        Search for test patient resources using various search parameters.
        All results contain synthetic test data only.
      operationId: searchPatients
      parameters:
        - name: _id
          in: query
          required: false
          description: Logical id of this resource
          schema:
            type: string
        - name: identifier
          in: query
          required: false
          description: A patient identifier
          schema:
            type: string
        - name: name
          in: query
          required: false
          description: A portion of either family or given name of the patient
          schema:
            type: string
        - name: birthdate
          in: query
          required: false
          description: The patient's date of birth
          schema:
            type: string
            format: date
        - name: gender
          in: query
          required: false
          description: Gender of the patient
          schema:
            type: string
            enum: [male, female, other, unknown]
        - name: _count
          in: query
          required: false
          description: Maximum number of results to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 10
        - name: _sort
          in: query
          required: false
          description: Sort order (e.g., name, birthdate)
          schema:
            type: string
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful search. Returns Bundle of test Patient resources.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/FHIRBundle'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'

  /Patient/{patientId}/$everything:
    get:
      tags:
        - Patient
      summary: Get all resources for a test patient
      description: |
        Retrieves all FHIR test resources associated with a specific test patient using the 
        FHIR $everything operation. This includes all related resources such as:
        - Patient demographics (test data)
        - Conditions (diagnoses - test data)
        - Medications (test data)
        - Observations (lab results, vital signs - test data)
        - Encounters (visits, appointments - test data)
        - Procedures (test data)
        - Allergies (test data)
        - And other associated clinical data (test data)
        
        **Note**: All data returned is synthetic test data. No real patient information
        is stored or returned by this test server.
        
        The response is a FHIR Bundle containing all related test resources.
      operationId: getPatientEverything
      parameters:
        - name: patientId
          in: path
          required: true
          description: |
            The test patient identifier (MPIID - Master Patient Index ID).
            Valid test patient MPIIDs can be found in fhir_test_patients.csv.
            All patient IDs reference test/synthetic data only.
          schema:
            type: string
            pattern: '^\d+$'
            example: "100000010"
          examples:
            marla_gonzalez:
              value: "100000010"
              summary: Marla Gonzalez (test patient)
            steve_burns:
              value: "100000009"
              summary: Steve Burns (test patient)
            john_smith:
              value: "100000005"
              summary: John Smith (test patient)
        - name: _count
          in: query
          required: false
          description: |
            Maximum number of resources to return in the bundle.
            If not specified, all resources are returned.
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 1000
            example: 100
        - name: _since
          in: query
          required: false
          description: |
            Only return resources that have been modified since the specified date/time.
            Format: YYYY-MM-DDTHH:mm:ss+zz:zz (ISO 8601)
          schema:
            type: string
            format: date-time
            example: "2024-01-01T00:00:00Z"
      security:
        - BasicAuth: []
      responses:
        '200':
          description: |
            Successful response. Returns a FHIR Bundle containing all test resources 
            associated with the test patient. All data in the response is synthetic test data.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/FHIRBundle'
              examples:
                success_response:
                  summary: Successful test patient data retrieval
                  description: |
                    A FHIR Bundle containing test Patient resource and all related test resources
                    such as Conditions, Medications, Observations, Encounters, etc.
                    All data shown is synthetic test data only.
                  value:
                    resourceType: "Bundle"
                    type: "searchset"
                    total: 25
                    entry:
                      - resource:
                          resourceType: "Patient"
                          id: "100000010"
                          name:
                            - given: ["Marla"]
                              family: "Gonzalez"
                      - resource:
                          resourceType: "Condition"
                          id: "condition-1"
                          subject:
                            reference: "Patient/100000010"
                          code:
                            coding:
                              - system: "http://snomed.info/sct"
                                code: "44054006"
                                display: "Diabetes mellitus type 2"
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'

  /Condition:
    get:
      tags:
        - Condition
      summary: Search for test conditions (diagnoses)
      description: |
        Search for Condition resources (diagnoses) for test patients.
        All conditions are test data only.
      operationId: searchConditions
      parameters:
        - name: patient
          in: query
          required: false
          description: Who has the condition (reference to test patient)
          schema:
            type: string
        - name: category
          in: query
          required: false
          description: The category of the condition
          schema:
            type: string
        - name: clinical-status
          in: query
          required: false
          description: The clinical status of the condition
          schema:
            type: string
        - name: code
          in: query
          required: false
          description: Code for the condition
          schema:
            type: string
        - name: _count
          in: query
          required: false
          description: Maximum number of results to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 10
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful search. Returns Bundle of test Condition resources.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/FHIRBundle'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'

  /Condition/{conditionId}:
    get:
      tags:
        - Condition
      summary: Read a specific test condition
      description: |
        Retrieves a specific Condition resource (diagnosis) by ID.
        All data is synthetic test data only.
      operationId: readCondition
      parameters:
        - name: conditionId
          in: path
          required: true
          description: Logical id of the test condition resource
          schema:
            type: string
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful response. Returns test Condition resource.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/Condition'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'

  /MedicationStatement:
    get:
      tags:
        - MedicationStatement
      summary: Search for test medication statements
      description: |
        Search for MedicationStatement resources for test patients.
        All medications are test data only.
      operationId: searchMedicationStatements
      parameters:
        - name: patient
          in: query
          required: false
          description: The identity of a patient to list medications for (reference to test patient)
          schema:
            type: string
        - name: status
          in: query
          required: false
          description: Medication statement status
          schema:
            type: string
            enum: [active, completed, entered-in-error, intended, stopped, on-hold, unknown, not-taken]
        - name: medication
          in: query
          required: false
          description: Code for the medication
          schema:
            type: string
        - name: _count
          in: query
          required: false
          description: Maximum number of results to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 10
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful search. Returns Bundle of test MedicationStatement resources.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/FHIRBundle'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'

  /MedicationStatement/{medicationStatementId}:
    get:
      tags:
        - MedicationStatement
      summary: Read a specific test medication statement
      description: |
        Retrieves a specific MedicationStatement resource by ID.
        All data is synthetic test data only.
      operationId: readMedicationStatement
      parameters:
        - name: medicationStatementId
          in: path
          required: true
          description: Logical id of the test medication statement resource
          schema:
            type: string
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful response. Returns test MedicationStatement resource.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/MedicationStatement'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'

  /Observation:
    get:
      tags:
        - Observation
      summary: Search for test observations
      description: |
        Search for Observation resources (lab results, vital signs, etc.) for test patients.
        All observations are test data only.
      operationId: searchObservations
      parameters:
        - name: patient
          in: query
          required: false
          description: The subject that the observation is about (reference to test patient)
          schema:
            type: string
        - name: category
          in: query
          required: false
          description: The classification of the type of observation
          schema:
            type: string
        - name: code
          in: query
          required: false
          description: The code of the observation type
          schema:
            type: string
        - name: date
          in: query
          required: false
          description: Obtained date/time
          schema:
            type: string
        - name: status
          in: query
          required: false
          description: The status of the observation
          schema:
            type: string
            enum: [registered, preliminary, final, amended, corrected, cancelled, entered-in-error, unknown]
        - name: _count
          in: query
          required: false
          description: Maximum number of results to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 10
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful search. Returns Bundle of test Observation resources.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/FHIRBundle'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'

  /Observation/{observationId}:
    get:
      tags:
        - Observation
      summary: Read a specific test observation
      description: |
        Retrieves a specific Observation resource by ID.
        All data is synthetic test data only.
      operationId: readObservation
      parameters:
        - name: observationId
          in: path
          required: true
          description: Logical id of the test observation resource
          schema:
            type: string
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful response. Returns test Observation resource.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/Observation'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'

  /Encounter:
    get:
      tags:
        - Encounter
      summary: Search for test encounters
      description: |
        Search for Encounter resources (visits, appointments) for test patients.
        All encounters are test data only.
      operationId: searchEncounters
      parameters:
        - name: patient
          in: query
          required: false
          description: The patient or group present at the encounter (reference to test patient)
          schema:
            type: string
        - name: status
          in: query
          required: false
          description: The status of the encounter
          schema:
            type: string
            enum: [planned, arrived, triaged, in-progress, onleave, finished, cancelled, entered-in-error, unknown]
        - name: class
          in: query
          required: false
          description: Classification of patient encounter
          schema:
            type: string
        - name: type
          in: query
          required: false
          description: Specific type of encounter
          schema:
            type: string
        - name: date
          in: query
          required: false
          description: A date within the period the Encounter lasted
          schema:
            type: string
        - name: _count
          in: query
          required: false
          description: Maximum number of results to return
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 10
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful search. Returns Bundle of test Encounter resources.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/FHIRBundle'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'

  /Encounter/{encounterId}:
    get:
      tags:
        - Encounter
      summary: Read a specific test encounter
      description: |
        Retrieves a specific Encounter resource by ID.
        All data is synthetic test data only.
      operationId: readEncounter
      parameters:
        - name: encounterId
          in: path
          required: true
          description: Logical id of the test encounter resource
          schema:
            type: string
      security:
        - BasicAuth: []
      responses:
        '200':
          description: Successful response. Returns test Encounter resource.
          content:
            application/fhir+json:
              schema:
                $ref: '#/components/schemas/Encounter'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'

components:
  securitySchemes:
    BasicAuth:
      type: http
      scheme: basic
      description: |
        HTTP Basic Authentication is required for all requests.
        Provide username and password in the Authorization header.
        Format: Authorization: Basic base64(username:password)

  responses:
    Unauthorized:
      description: |
        Unauthorized. Authentication failed. Check that valid username and 
        password credentials are provided via HTTP Basic Authentication.
      content:
        application/fhir+json:
          schema:
            $ref: '#/components/schemas/OperationOutcome'
          examples:
            unauthorized:
              summary: Authentication failed
              value:
                resourceType: "OperationOutcome"
                issue:
                  - severity: "error"
                    code: "security"
                    details:
                      text: "Authentication failed"

    NotFound:
      description: |
        Resource not found. The specified resource does not exist in the test system.
      content:
        application/fhir+json:
          schema:
            $ref: '#/components/schemas/OperationOutcome'
          examples:
            not_found:
              summary: Resource not found
              value:
                resourceType: "OperationOutcome"
                issue:
                  - severity: "error"
                    code: "not-found"
                    details:
                      text: "Test resource not found"

    BadRequest:
      description: |
        Bad Request. The request was malformed or invalid.
      content:
        application/fhir+json:
          schema:
            $ref: '#/components/schemas/OperationOutcome'
          examples:
            bad_request:
              summary: Bad request
              value:
                resourceType: "OperationOutcome"
                issue:
                  - severity: "error"
                    code: "invalid"
                    details:
                      text: "Invalid search parameter"

    ServerError:
      description: |
        Internal server error. The FHIR server encountered an unexpected error.
      content:
        application/fhir+json:
          schema:
            $ref: '#/components/schemas/OperationOutcome'
          examples:
            server_error:
              summary: Internal server error
              value:
                resourceType: "OperationOutcome"
                issue:
                  - severity: "error"
                    code: "exception"
                    details:
                      text: "Internal server error"

  schemas:
    CapabilityStatement:
      type: object
      required:
        - resourceType
        - status
        - kind
        - fhirVersion
      properties:
        resourceType:
          type: string
          enum: ["CapabilityStatement"]
          description: The FHIR resource type
        status:
          type: string
          enum: ["draft", "active", "retired", "unknown"]
          description: The status of this capability statement
        kind:
          type: string
          enum: ["instance", "capability", "requirements"]
          description: The kind of capability statement
        fhirVersion:
          type: string
          description: FHIR version (e.g., "4.0.1")
        rest:
          type: array
          description: A definition of the restful capabilities of the solution
          items:
            type: object
            properties:
              mode:
                type: string
                enum: ["client", "server"]
              resource:
                type: array
                description: A specification of the restful capabilities of the solution for a specific resource type
                items:
                  type: object
                  properties:
                    type:
                      type: string
                      description: A type of resource exposed via the restful interface
                    interaction:
                      type: array
                      description: Identifies a restful operation supported by the solution
                    searchParam:
                      type: array
                      description: Search parameters for implementations to support and/or make use of

    FHIRBundle:
      type: object
      required:
        - resourceType
        - type
        - entry
      properties:
        resourceType:
          type: string
          enum: ["Bundle"]
          description: The FHIR resource type
          example: "Bundle"
        type:
          type: string
          enum: ["searchset", "collection", "history", "document", "message", "transaction", "transaction-response", "batch", "batch-response"]
          description: The type of bundle
          example: "searchset"
        total:
          type: integer
          description: Total number of resources in the bundle
          example: 25
        entry:
          type: array
          description: Array of bundle entries, each containing a resource
          items:
            $ref: '#/components/schemas/BundleEntry'
      example:
        resourceType: "Bundle"
        type: "searchset"
        total: 25
        entry:
          - resource:
              resourceType: "Patient"
              id: "100000010"

    BundleEntry:
      type: object
      properties:
        resource:
          type: object
          description: The actual FHIR test resource (Patient, Condition, Medication, Observation, etc.) - all test data only
          additionalProperties: true
        fullUrl:
          type: string
          format: uri
          description: Full URL of the resource
          example: "http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo/Patient/100000010"
        search:
          type: object
          description: Search-related information
          properties:
            mode:
              type: string
              enum: ["match", "include", "outcome"]
              example: "match"

    Patient:
      type: object
      required:
        - resourceType
      properties:
        resourceType:
          type: string
          enum: ["Patient"]
          description: The FHIR resource type
        id:
          type: string
          description: Logical id of this resource (test patient MPIID)
        name:
          type: array
          description: A name associated with the test patient
          items:
            type: object
            properties:
              family:
                type: string
                description: Family name (surname)
              given:
                type: array
                items:
                  type: string
                description: Given names
        birthDate:
          type: string
          format: date
          description: The date of birth (test data)
        gender:
          type: string
          enum: [male, female, other, unknown]
          description: Gender (test data)
        identifier:
          type: array
          description: An identifier for this test patient
          items:
            type: object
            properties:
              system:
                type: string
                format: uri
              value:
                type: string

    Condition:
      type: object
      required:
        - resourceType
      properties:
        resourceType:
          type: string
          enum: ["Condition"]
          description: The FHIR resource type
        id:
          type: string
          description: Logical id of this resource
        subject:
          type: object
          description: Who has the condition (reference to test patient)
          properties:
            reference:
              type: string
              example: "Patient/100000010"
        code:
          type: object
          description: Identification of the condition (test data)
          properties:
            coding:
              type: array
              items:
                type: object
                properties:
                  system:
                    type: string
                    format: uri
                  code:
                    type: string
                  display:
                    type: string
        clinicalStatus:
          type: object
          description: The clinical status of the condition
        verificationStatus:
          type: object
          description: The verification status of the condition

    MedicationStatement:
      type: object
      required:
        - resourceType
      properties:
        resourceType:
          type: string
          enum: ["MedicationStatement"]
          description: The FHIR resource type
        id:
          type: string
          description: Logical id of this resource
        subject:
          type: object
          description: The person or animal who is/was taking the medication (reference to test patient)
          properties:
            reference:
              type: string
              example: "Patient/100000010"
        medicationCodeableConcept:
          type: object
          description: What medication was taken (test data)
          properties:
            coding:
              type: array
              items:
                type: object
        status:
          type: string
          enum: [active, completed, entered-in-error, intended, stopped, on-hold, unknown, not-taken]
          description: A code representing the patient or other source's judgment about the state of the medication

    Observation:
      type: object
      required:
        - resourceType
      properties:
        resourceType:
          type: string
          enum: ["Observation"]
          description: The FHIR resource type
        id:
          type: string
          description: Logical id of this resource
        subject:
          type: object
          description: The patient, or group of patients, this observation is about (reference to test patient)
          properties:
            reference:
              type: string
              example: "Patient/100000010"
        code:
          type: object
          description: Type of observation (test data)
          properties:
            coding:
              type: array
              items:
                type: object
        status:
          type: string
          enum: [registered, preliminary, final, amended, corrected, cancelled, entered-in-error, unknown]
          description: The status of the result value
        valueQuantity:
          type: object
          description: The actual result value (test data)
        effectiveDateTime:
          type: string
          format: date-time
          description: Clinically relevant time/time-period for observation (test data)

    Encounter:
      type: object
      required:
        - resourceType
      properties:
        resourceType:
          type: string
          enum: ["Encounter"]
          description: The FHIR resource type
        id:
          type: string
          description: Logical id of this resource
        status:
          type: string
          enum: [planned, arrived, triaged, in-progress, onleave, finished, cancelled, entered-in-error, unknown]
          description: The status of the encounter
        class:
          type: object
          description: Classification of patient encounter (test data)
        type:
          type: array
          description: Specific type of encounter (test data)
          items:
            type: object
        subject:
          type: object
          description: The patient or group present at the encounter (reference to test patient)
          properties:
            reference:
              type: string
              example: "Patient/100000010"
        period:
          type: object
          description: The start and end time of the encounter (test data)
          properties:
            start:
              type: string
              format: date-time
            end:
              type: string
              format: date-time

    OperationOutcome:
      type: object
      required:
        - resourceType
        - issue
      properties:
        resourceType:
          type: string
          enum: ["OperationOutcome"]
          example: "OperationOutcome"
        issue:
          type: array
          description: Array of issues/errors
          items:
            $ref: '#/components/schemas/Issue'
      example:
        resourceType: "OperationOutcome"
        issue:
          - severity: "error"
            code: "not-found"
            details:
              text: "Test resource not found"

    Issue:
      type: object
      required:
        - severity
        - code
      properties:
        severity:
          type: string
          enum: ["fatal", "error", "warning", "information"]
          description: Severity of the issue
          example: "error"
        code:
          type: string
          enum: ["invalid", "structure", "required", "value", "invariant", "security", "login", "unknown", "expired", "forbidden", "suppressed", "processing", "not-supported", "duplicate", "multiple-matches", "not-found", "too-long", "code-invalid", "extension", "too-costly", "business-rule", "conflict", "transient", "lock-error", "no-store", "exception", "timeout", "incomplete", "throttled", "informational"]
          description: Error code
          example: "not-found"
        details:
          type: object
          properties:
            text:
              type: string
              description: Human-readable description of the issue
              example: "Test resource with ID 100000010 not found"

# Example Request/Response Documentation
# ======================================
#
# Example: Fetch Metadata (CapabilityStatement)
# ---------------------------------------------
# GET /metadata HTTP/1.1
# Host: ec2-98-82-129-136.compute-1.amazonaws.com
# Authorization: Basic base64(username:password)
# Accept: application/fhir+json
#
# curl -X GET \
#   "http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo/metadata" \
#   -H "Accept: application/fhir+json" \
#   -u "username:password"
#
# Example: Get Patient Everything
# ---------------------------------
# GET /Patient/100000010/$everything HTTP/1.1
# Host: ec2-98-82-129-136.compute-1.amazonaws.com
# Authorization: Basic base64(username:password)
# Accept: application/fhir+json
#
# curl -X GET \
#   "http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo/Patient/100000010/\$everything" \
#   -H "Accept: application/fhir+json" \
#   -u "username:password"
#
# Example: Search Patients
# ------------------------
# GET /Patient?name=Gonzalez&_count=10 HTTP/1.1
# Host: ec2-98-82-129-136.compute-1.amazonaws.com
# Authorization: Basic base64(username:password)
# Accept: application/fhir+json
#
# curl -X GET \
#   "http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo/Patient?name=Gonzalez&_count=10" \
#   -H "Accept: application/fhir+json" \
#   -u "username:password"
#
# Example: Search Conditions for Patient
# ---------------------------------------
# GET /Condition?patient=Patient/100000010 HTTP/1.1
# Host: ec2-98-82-129-136.compute-1.amazonaws.com
# Authorization: Basic base64(username:password)
# Accept: application/fhir+json
#
# curl -X GET \
#   "http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo/Condition?patient=Patient/100000010" \
#   -H "Accept: application/fhir+json" \
#   -u "username:password"
#
# Example Python Request:
# -----------------------
# import requests
# from requests.auth import HTTPBasicAuth
#
# base_url = "http://ec2-98-82-129-136.compute-1.amazonaws.com/i4h/ctgov/FHIRRepo"
# 
# # Get metadata
# metadata_response = requests.get(
#     f"{base_url}/metadata",
#     auth=HTTPBasicAuth("username", "password"),
#     headers={"Accept": "application/fhir+json"}
# )
# 
# # Get patient everything
# patient_response = requests.get(
#     f"{base_url}/Patient/100000010/$everything",
#     auth=HTTPBasicAuth("username", "password"),
#     headers={"Accept": "application/fhir+json"}
# )
# 
# # Search patients
# search_response = requests.get(
#     f"{base_url}/Patient",
#     auth=HTTPBasicAuth("username", "password"),
#     headers={"Accept": "application/fhir+json"},
#     params={"name": "Gonzalez", "_count": 10}
# )
#
# Test Patient IDs (from fhir_test_patients.csv):
# -----------------------------------------------
# NOTE: All patient data is synthetic test data only. These are not real patients.
# 100000010 - Marla Gonzalez (test patient)
# 100000009 - Steve Burns (test patient)
# 100000008 - Marla M Gonzalez (test patient)
# 100000007 - Eric Middle Johnson (test patient)
# 100000006 - Harold Middle Simpson (test patient)
# 100000005 - John Smith (test patient)
# 100000004 - IMS Demo1 (test patient)
# 100000003 - BT Collins (test patient)
# 100000002 - Zack OReilin (test patient)
# 100000001 - Dan Clark (test patient)
#
# Note: To get the exact capabilities of this server, query the /metadata endpoint
# with authentication. This contract is based on standard FHIR R4 patterns and common
# resource types. The actual server may support additional or different resources.
